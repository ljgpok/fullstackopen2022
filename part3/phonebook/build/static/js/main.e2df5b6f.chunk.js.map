{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filter","searchVal","handleSearchVal","value","onChange","PersonForm","newName","newPhone","onNewPersonSubmit","handleNameChange","handlePhoneChange","onSubmit","type","Person","person","onDeletePerson","name","number","onClick","Persons","persons","filtPers","filter","toLocaleLowerCase","indexOf","toLowerCase","map","id","Notification","message","styleObj","isStyle","color","className","style","baseUrl","axios","get","then","response","data","newObject","post","delete","console","log","put","App","useState","setPersons","setNewName","setNewPhone","setSearchVal","successMessage","setSuccessMessage","isNotifStyle","setIsNotifStyle","useEffect","personService","initialPersons","getPersonWithSameName","event","target","a","e","preventDefault","personObj","length","window","confirm","samePerson","returnedPerson","p","setTimeout","catch","error","updatePerson","createPerson","deletedPersonObj","find","deletedPersonId","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.e2df5b6f.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ searchVal, handleSearchVal }) => {\n  return <input value={searchVal} onChange={handleSearchVal} />;\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  newName,\n  newPhone,\n  onNewPersonSubmit,\n  handleNameChange,\n  handlePhoneChange,\n}) => {\n  return (\n    <form onSubmit={onNewPersonSubmit}>\n      name: <input value={newName} onChange={handleNameChange} />\n      <br />\n      phone: <input value={newPhone} onChange={handlePhoneChange} />\n      <button type=\"submit\">add</button>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ person, onDeletePerson }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      <button onClick={onDeletePerson}>delete</button>\n    </div>\n  );\n};\n\nexport default Person;\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({persons, searchVal, onDeletePerson}) => {\n\n  const filterPersons = () => {\n    return persons.filter((person) => {\n      if ( person.name.toLocaleLowerCase().indexOf(searchVal.toLowerCase()) !== -1 ) {\n        return person;\n      }\n    })\n  }\n\n  const filtPers = filterPersons();\n\n  return (\n    <div>\n      {\n        filtPers.map((person) => \n            <Person \n              key={person.name} \n              person={person} \n              onDeletePerson={() => onDeletePerson(person.id)} \n            />\n        )\n      }\n    </div>\n  )\n}\n\nexport default Persons","import React from \"react\";\n\nconst Notification = ({ message, isStyle }) => {\n  const styleObj = isStyle\n    ? {\n        color: \"red\",\n      }\n    : {};\n\n  if (message === null) {\n    return null;\n  }\n\n  return (\n    <div className=\"notification\" style={styleObj}>\n      {message}\n    </div>\n  );\n};\n\nexport default Notification;\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data);\n}\n\nconst update = (id, newObject) => {\n  console.log('in update', id, newObject)\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default {getAll, create, deletePerson, update}","import { useState, useEffect } from \"react\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\nimport personService from \"./services/persons\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n  const [searchVal, setSearchVal] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [isNotifStyle, setIsNotifStyle] = useState(false);\n\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => setPersons(initialPersons));\n  }, []);\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handlePhoneChange = (event) => {\n    console.log(event.target.value);\n    setNewPhone(event.target.value);\n  };\n\n  const handleSearchVal = (event) => {\n    console.log(event.target.value);\n    setSearchVal(event.target.value);\n  };\n\n  const getPersonWithSameName = () => {\n    const haveSameName = persons.filter((person) => {\n      if (person.name.toLocaleLowerCase() === newName.toLocaleLowerCase()) {\n        return person;\n      }\n      return false;\n    });\n    return haveSameName;\n  };\n\n  const checkSameName = () => {\n    const haveSameName = getPersonWithSameName();\n\n    if (haveSameName.length !== 0) {\n      return true;\n    }\n    return false;\n  };\n\n  const isChangePersonNumberConfirm = (name) => {\n    let isChangePersonNumber = window.confirm(\n      `${name} is already added to phonebook, replace the old number with the new one?`\n    );\n\n    return isChangePersonNumber;\n  };\n\n  const updatePerson = (personObj) => {\n    const samePerson = getPersonWithSameName();\n    const id = samePerson[0][\"id\"];\n    const name = samePerson[0][\"name\"];\n    personService\n      .update(id, personObj)\n      .then((returnedPerson) => {\n        setPersons(persons.map((p) => (p.id !== id ? p : returnedPerson)));\n        setNewName(\"\");\n        setNewPhone(\"\");\n        setSuccessMessage(`added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 3000);\n      })\n      .catch((error) => {\n        setIsNotifStyle(true);\n        setSuccessMessage(`${name} has already been removed from server`);\n        setPersons(persons.filter((p) => p.id !== id));\n        setNewName(\"\");\n        setNewPhone(\"\");\n\n        setTimeout(() => {\n          setIsNotifStyle(false);\n          setSuccessMessage(null);\n        }, 3000);\n      });\n  };\n\n  const createPerson = (personObj) => {\n    personService\n      .create(personObj)\n      .then((returnedPerson) => {\n        setPersons([...persons, returnedPerson]);\n        setNewName(\"\");\n        setNewPhone(\"\");\n        setSuccessMessage(`added ${returnedPerson.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 3000);\n      })\n      .catch((error) => {\n        setIsNotifStyle(true);\n        setSuccessMessage(`${error.response.data.error}`);\n        setTimeout(() => {\n          setIsNotifStyle(false);\n          setSuccessMessage(null);\n        }, 3000);\n      });\n  };\n\n  const onNewPersonSubmit = (e) => {\n    e.preventDefault();\n\n    const personObj = {\n      name: newName,\n      number: newPhone,\n    };\n    const isPersonHaveSimillarName = checkSameName();\n    let isChnagePersonInfo = false;\n\n    if (isPersonHaveSimillarName) {\n      isChnagePersonInfo = isChangePersonNumberConfirm(newName);\n      if (isChnagePersonInfo) {\n        updatePerson(personObj);\n        return;\n      }\n      return;\n    }\n\n    createPerson(personObj);\n  };\n\n  const onDeletePerson = (id) => {\n    const deletedPersonObj = persons.find((p) => p.id === id);\n    const result = window.confirm(`Delete ${deletedPersonObj.name}?`);\n\n    if (result)\n      personService\n        .deletePerson(id)\n        .then((deletedPersonId) => {\n          setPersons(\n            persons.filter((p) => {\n              if (p.id !== id) {\n                return p;\n              }\n            })\n          );\n          setSuccessMessage(`deleted`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 3000);\n        })\n        .catch((error) => {\n          setSuccessMessage(\n            \"Information of this person has already been removed from the server\"\n          );\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 3000);\n        });\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={successMessage} isStyle={isNotifStyle} />\n\n      <Filter searchVal={searchVal} handleSearchVal={handleSearchVal} />\n\n      <h2>add a new</h2>\n\n      <PersonForm\n        newName={newName}\n        a\n        newPhone={newPhone}\n        onNewPersonSubmit={onNewPersonSubmit}\n        handleNameChange={handleNameChange}\n        handlePhoneChange={handlePhoneChange}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons\n        persons={persons}\n        onDeletePerson={onDeletePerson}\n        searchVal={searchVal}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}